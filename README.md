# Clientera - MVP Telegram-–±–æ—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤

Telegram-–±–æ—Ç –¥–ª—è —Å–∞–ª–æ–Ω–∞ –∫—Ä–∞—Å–æ—Ç—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π LLM (OpenAI GPT-4) –∏ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π (Qdrant Cloud). –ë–æ—Ç –≤–µ–¥—ë—Ç –¥–∏–∞–ª–æ–≥, –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞, –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –µ–≥–æ —á–µ—Ä–µ–∑ API Youclients, –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–ø–∏—Å–∏.

## üöÄ –§—É–Ω–∫—Ü–∏–∏

- **–£–º–Ω—ã–π –¥–∏–∞–ª–æ–≥ —Å –∫–ª–∏–µ–Ω—Ç–æ–º** - –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é GPT-4
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Youclients** - –ø–æ–ª—É—á–µ–Ω–∏–µ —É—Å–ª—É–≥/–º–∞—Å—Ç–µ—Ä–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
- **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π** - –ø–æ–∏—Å–∫ –æ—Ç–≤–µ—Ç–æ–≤ –≤ Markdown-—Ñ–∞–π–ª–∞—Ö —á–µ—Ä–µ–∑ Qdrant
- **–ü—Ä–æ—Ñ–∏–ª—å –∫–ª–∏–µ–Ω—Ç–∞** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –∏ –∏—Å—Ç–æ—Ä–∏–∏
- **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–ø–∏—Å–∏
- **–ê–¥–º–∏–Ω–∫–∞** - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.11+**
- **python-telegram-bot** - Telegram Bot API
- **OpenAI API** - GPT-4 –∏ text-embedding-3-small
- **Qdrant Cloud** - –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
- **PostgreSQL** - –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **FastAPI + Jinja2** - –∞–¥–º–∏–Ω–∫–∞
- **Heroku** - —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone <repository-url>
cd Clientera
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# OpenAI
OPENAI_API_KEY=your_openai_api_key_here

# Qdrant Cloud
QDRANT_URL=your_qdrant_cloud_url_here
QDRANT_API_KEY=your_qdrant_api_key_here

# PostgreSQL
DATABASE_URL=postgresql://user:password@localhost:5432/clientera_db

# Youclients API
YOUCLIENTS_API_KEY=your_youclients_api_key_here
YOUCLIENTS_COMPANY_ID=your_company_id_here

# Admin settings
ADMIN_SECRET_KEY=your_admin_secret_key_here
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your_admin_password_here

# App settings
DEBUG=False
REMIND_AFTER_DAYS=21
SESSION_TIMEOUT_HOURS=6
```

### 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
python -c "from database.database import init_db; init_db()"
```

### 5. –ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
```bash
python bot/embedding.py
```

## üöÄ –ó–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python bot/main.py

# –ó–∞–ø—É—Å–∫ –∞–¥–º–∏–Ω–∫–∏
python -m uvicorn admin.main:app --reload --port 8000

# –ó–∞–ø—É—Å–∫ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (–≤—Ä—É—á–Ω—É—é)
python bot/remind.py
```

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Heroku

1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
```bash
heroku create your-app-name
```

2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ PostgreSQL**
```bash
heroku addons:create heroku-postgresql:mini
```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
heroku config:set TELEGRAM_BOT_TOKEN=your_token
heroku config:set OPENAI_API_KEY=your_key
# ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```

4. **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**
```bash
git push heroku main
```

5. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
```bash
heroku run python -c "from database.database import init_db; init_db()"
```

6. **–ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π**
```bash
heroku run python bot/embedding.py
```

7. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π**
```bash
heroku addons:create scheduler:standard
heroku addons:open scheduler
```
–î–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–∞—á—É: `python bot/remind.py` —Å —á–∞—Å—Ç–æ—Ç–æ–π "Daily"

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Clientera/
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # Telegram-–±–æ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ remind.py            # –°–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ embedding.py         # –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ dialog_manager.py    # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ openai_client.py     # OpenAI API
‚îÇ   ‚îî‚îÄ‚îÄ youclients_api.py    # Youclients API
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ models.py            # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ database.py          # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î
‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # FastAPI –∞–¥–º–∏–Ω–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ templates/           # HTML —à–∞–±–ª–æ–Ω—ã
‚îú‚îÄ‚îÄ knowledge_base/          # Markdown —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ config.py                # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ requirements.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Procfile                 # Heroku –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ runtime.txt              # –í–µ—Ä—Å–∏—è Python
‚îî‚îÄ‚îÄ README.md
```

## üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π

–°–æ–∑–¥–∞–π—Ç–µ Markdown —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ `knowledge_base/` —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

```markdown
# –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞

## –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–∞–∑–¥–µ–ª–∞ 1
–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä–∞–∑–¥–µ–ª–∞...

## –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–∞–∑–¥–µ–ª–∞ 2
–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä–∞–∑–¥–µ–ª–∞...
```

–ö–∞–∂–¥—ã–π —Ä–∞–∑–¥–µ–ª —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º `##` –±—É–¥–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–º —á–∞–Ω–∫–æ–º –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑–µ.

## üîß API Endpoints (–ê–¥–º–∏–Ω–∫–∞)

- `GET /` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- `GET /clients` - –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤
- `GET /clients/{id}` - –î–µ—Ç–∞–ª–∏ –∫–ª–∏–µ–Ω—Ç–∞
- `GET /sessions/{id}` - –î–µ—Ç–∞–ª–∏ —Å–µ—Å—Å–∏–∏
- `GET /usage` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ OpenAI
- `GET /appointments` - –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π
- `GET /analytics` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

## ü§ñ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `/help` - –°–ø—Ä–∞–≤–∫–∞
- `/services` - –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥
- `/masters` - –°–ø–∏—Å–æ–∫ –º–∞—Å—Ç–µ—Ä–æ–≤
- `/profile` - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üìä –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### Client
- Telegram ID, –∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω
- –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–µ —É—Å–ª—É–≥–∏, –º–∞—Å—Ç–µ—Ä–∞, –≤—Ä–µ–º—è
- –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤–∏–∑–∏—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

### Message
- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –¢–∏–ø (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–±–æ—Ç)
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –∫–ª–∏–µ–Ω—Ç—É –∏ —Å–µ—Å—Å–∏–∏

### OpenAIUsageLog
- –ú–æ–¥–µ–ª—å, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤
- –°—Ç–æ–∏–º–æ—Å—Ç—å –≤ USD

### Appointment
- –î–µ—Ç–∞–ª–∏ –∑–∞–ø–∏—Å–∏
- –°—Ç–∞—Ç—É—Å (–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ/–≤—ã–ø–æ–ª–Ω–µ–Ω–æ/–æ—Ç–º–µ–Ω–µ–Ω–æ)
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –∫–ª–∏–µ–Ω—Ç—É

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- HTTP Basic Auth –¥–ª—è –∞–¥–º–∏–Ω–∫–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ API –∫–ª—é—á–µ–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è OpenAI
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ AI –∑–∞–ø—Ä–æ—Å–æ–≤
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å–µ—Å—Å–∏–π –∏ —Å–æ–æ–±—â–µ–Ω–∏–π

## üö® Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ OpenAI
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á OpenAI
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç—É
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Qdrant
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç Markdown —Ñ–∞–π–ª–æ–≤

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –¥–µ—Ç–∞–ª–µ–π. 